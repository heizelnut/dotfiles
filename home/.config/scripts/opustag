#!/bin/sh

# dependencies
require ffmpeg || exit 1

printf "ğŸ¹ Album Title: "
read album

printf "ğŸ¨ Artist: "
read artist

printf "ğŸ“… Year of Publication: "
read year

for file in "$@"
do
	cleanfile=$(basename "$file")
	noext=${cleanfile%.*}
	track=${noext%%:*}
	name=${noext#*:}
	echo "ğŸµ $artist - $name ($track)"
	ffmpeg -i "file:$file" -acodec copy \
		-metadata title="$name" \
		-metadata artist="$artist" \
		-metadata date="$year" \
		-metadata album="$album" \
		-metadata track="$track" \
		"$artist - $name.opus"
done
